# CFDA-TREC-iKAT2025

This repository contains the components and pipeline developed for the TREC iKAT 2025 competition ([https://www.trecikat.com/](https://www.trecikat.com/)). Our team, part of the CFDA Lab Summer Intern program at the Research Center for Information Technology Innovation (CITI), Academia Sinica, Taiwan, focuses on offline submissions for the iKAT track.

## Repository Structure

- `DATA/`: Contains datasets for data preparation, and instructions to get collections.
- `CHIQ/`: Implements the CHIQ-AD method for candidate generation.
- `LLM4CS/`: Implements the LLM4CS method for candidate generation.
- `AdaRewriter/`: Performs best-of-n inference to select the best query rewrites.
- `ikat-baseline/`: Handles passage retrieval and passage reranking.
- `ikat-offline/`: Generates the final submission for the offline task.
- `environment.yml`: Defines the Python environment and dependencies required for the project.

## Pipeline Overview

1. **Data Preparation (`DATA/`)**:
   - Prepare datasets, including test topics, training topics, qrel files, and instructions to get collections.

2. **Rewrite Candidate Generation (`CHIQ/` & `LLM4CS/`)**:
   - Generate rewritten queries using CHIQ-AD and LLM4CS methods separately.

3. **Best-of-N Inference (`AdaRewriter/`)**:
   - Train and test the AdaRewriter model to rank and select the best query rewrites.

4. **Retrieve Passage (`ikat-baseline/`)**:
   - Use SPLADE to retrieve passages for the final queries generated by CHIQ-AD and LLM4CS.

5. **Rerank Passage (`ikat-baseline/`)**:
   - Apply Reciprocal Rank Fusion (RRF) to merge passage lists and use DeBERTa_v3 to rerank the unified list.

6. **PTKB Statement Classification & Passage Summarization (`ikat-offline/`)**:
   - Classify PTKB statements and summarize passages to prepare for response generation.

7. **Response Generation (`ikat-offline/`)**:
   - Generate responses using the processed data from the previous steps.

## Usage

1. Create the Python environment:

    ```bash
    conda env create -f environment.yml
    conda activate cfda-ikat25
    ```

2. Navigate to the corresponding subdirectory and follow the instructions in its `README.md` to execute specific tasks.

## Acknowledgments

We thank the TREC iKAT organizers for providing the datasets and guidelines. Special thanks to the CFDA Lab at Academia Sinica for their support and mentorship during the Summer Intern program.
