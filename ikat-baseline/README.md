# iKAT-Baseline: Retrieve and Rerank Passage

This component is designed for retrieving and reranking passages as part of the iKAT-Baseline pipeline. It includes retrieval and reranking techniques to produce a final ranked passage list for conversational search tasks.

## Pipeline

1. **SPLADE Retrieval**:
   - Requires 256GB RAM and one GPU.
   - Use SPLADE to retrieve passages separately for the final queries generated by LLM4CS and CHIQ-AD.

2. **RRF (Reciprocal Rank Fusion)**:
   - Fuse the two retrieved passage lists above using RRF to create a unified passage list.

3. **DeBERTa_v3 Reranking**:
   - Rerank the unified passage list using DeBERTa_v3 to produce the final ranked passage list.

## Usage

### SPLADE Retrieval

The script `run_splade.sh` is provided to perform passage retrieval. Follow these steps to use it:

1. **Configure Parameters**:
   - `index_dir`: Specify the directory containing the SPLADE index.
   - `eval_queries`: Specify the path to the evaluation queries.
   - `out_dir`: Specify the directory to save the retrieved passages.

2. **Run the Script**: After updating the script and preparing the required data, execute the following command:

    ```bash
    bash run_splade.sh
    ```

### RRF and Reranking

The script `run_rrf_rerank.sh` is provided to perform RRF and reranking. Follow these steps to use it:

1. **Configure Parameters**:
   - `index_dir2`: Specify the directory containing the second SPLADE index.
   - `fuse_path1`: Specify the path to the first retrieved passage list.
   - `fuse_path2`: Specify the path to the second retrieved passage list.
   - `fuse_output`: Specify the path to save the fused passage list.
   - `query_path`: Specify the path to the queries.
   - `rerank_output`: Specify the path to save the reranked passage list.

2. **Run the Script**: After updating the script and preparing the required data, execute the following command:

    ```bash
    bash run_rrf_rerank.sh
    ```
    
## Citation

If you use this component, please cite the original iKAT-Baseline paper as follows:

```bibtex
@inproceedings{coordinators-trec2024-papers-proc-4,
    author = {Mohammad Aliannejadi (University of Amsterdam), Zahra Abbasiantaeb (University of Amsterdam), Simon Lupart (University of Amsterdam), Shubham Chatterjee (University of Edinburgh), Jeffrey Dalton (University of Edinburgh), Leif Azzopardi (University of Strathclyde)},
    title = {TREC iKAT 2024: The Interactive Knowledge Assistance Track Overview},
    booktitle = {The Thirty-Third Text REtrieval Conference Proceedings (TREC 2024), Gaithersburg, MD, USA, November 15-18, 2024},
    series = {NIST Special Publication},
    volume = {1329},
    publisher = {National Institute of Standards and Technology (NIST)},
    year = {2024},
    trec_org = {coordinators},
    trec_runs = {},
    trec_tracks = {ikat},
    url = {https://trec.nist.gov/pubs/trec33/papers/Overview_ikat.pdf}
}
```

## Source Code

The original iKAT-Baseline source code is available at: [https://github.com/SimonLupart/ikat-baseline](https://github.com/SimonLupart/ikat-baseline)
